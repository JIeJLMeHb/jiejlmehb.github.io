:root {
    --bg: #ffffff;
    --text: #0f172a;
    --muted: #64748b;
    --card: #f8fafc;
    --border: #e2e8f0;
    --accent: #7c3aed;
    --accent-contrast: #ffffff;
    --radius: 12px;
    --shadow: 0 4px 12px rgba(0,0,0,.08);
    --transition: 0.25s ease;
  }
  
  html[data-theme="dark"] {
    --bg: #0b1220;
    --text: #e5e7eb;
    --muted: #9aa3b2;
    --card: #121a2b;
    --border: #273043;
    --accent: #7c3aed;
    --accent-contrast: #ffffff;
    --shadow: 0 6px 16px rgba(0,0,0,.4);
  }
  
  html[data-theme="custom"] {}
  
  * { box-sizing: border-box; }
  body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    transition: background var(--transition), color var(--transition);
    background: url("assets/Background.jpg") no-repeat center center fixed;
    background-size: cover;
  }
  
  .topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 20px;
    border-bottom: 1px solid var(--border);
    background: var(--card);
    position: sticky;
    top: 0;
    z-index: 10;
    box-shadow: var(--shadow);
  }
  .app-title { margin: 0; font-size: 22px; font-weight: 700; }
  
  .settings { position: relative; }
  
  .btn {
    border: 1px solid var(--border);
    background: var(--card);
    color: var(--text);
    padding: 8px 14px;
    border-radius: var(--radius);
    cursor: pointer;
    transition: transform .1s ease, background var(--transition), border-color var(--transition), color var(--transition);
  }
  .btn.icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--card);
    background-repeat: no-repeat;
    background-position: center;
    background-size: 60%;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
  }
  
  .btn.icon:hover {
    background-color: color-mix(in srgb, var(--accent) 15%, var(--card));
  }
  
  .btn.icon:active {
    transform: scale(0.95);
  }
  .btn.sm { padding: 6px 10px; font-size: 14px; }
  .btn.ghost { background: transparent; border-color: transparent; color: var(--muted); }
  .btn.ghost:hover { color: var(--text); }

  .play-btn {
    background-image: url("assets/icons/music-play-play-button-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }
  
  .pause-btn {
    background-image: url("assets/icons/media-player-music-pause-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }
  
  .next-btn {
    background-image: url("assets/icons/music-next-next-button-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }
  
  .prev-btn {
    background-image: url("assets/icons/music-music-player-player-2-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }
  
  .shuffle-btn {
    background-image: url("assets/icons/list-music-player-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }
  
  .random-btn {
    background-image: url("assets/icons/music-player-random-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }
  
  .loop-btn {
    width: 40px;
    height: 40px;
    background-size: 60%;
    background-position: center;
    background-repeat: no-repeat;
    border-radius: 50%;
    border: 1px solid var(--border);
  }
  
  .loop-on {
    background-image: url("assets/icons/media-player-music-player-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }
  
  .loop-off {
    background-image: url("assets/icons/headset-music-player-svgrepo-com.svg");
    width: clamp(36px, 5vw, 48px);
    height: clamp(36px, 5vw, 48px);
    background-size: 60%;
  }

  .dropdown {
    position: absolute;
    right: 0;
    top: calc(100% + 8px);
    width: 700px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 14px;
    display: none;
    animation: fadeIn .25s ease;
  }
  .dropdown.open { display: block; }
  .dropdown-section { margin-bottom: 14px; }
  .dropdown-label { display: block; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
  .theme-row, .link-row { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 8px; }
  .link-row { grid-template-columns: 1.1fr 1fr 1.6fr auto; }  

  .container { max-width: 980px; margin: 0 auto; padding: 20px; }
  .view { display: none; }
  .view.active { display: block; }
  
  .controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 16px;
  }
  
  .track-list {
    list-style: none;
    padding: 0;
    margin: 0;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
  }
  .track-item {
    display: grid;
    grid-template-columns: 56px 1fr auto;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-bottom: 1px solid var(--border);
    background: var(--bg);
    cursor: pointer;
    transition: background var(--transition);
  }
  .track-item:last-child { border-bottom: none; }
  .track-item:hover { background: color-mix(in srgb, var(--accent) 8%, var(--bg)); }
  .track-cover { width: 56px; height: 56px; border-radius: 8px; object-fit: cover; background: #ddd; }
  .track-title { font-weight: 600; }
  .track-artist { color: var(--muted); font-size: 14px; }
  .track-duration { color: var(--muted); font-size: 12px; padding: 0 8px; }
  .track-item.active { outline: 2px solid var(--accent); outline-offset: -2px; }

  .now-playing {
    position: fixed;
    left: 0; right: 0; bottom: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--card);
    border-top: 1px solid var(--border);
    padding: 10px 18px;
    gap: 14px;
    box-shadow: 0 -2px 10px rgba(0,0,0,.1);
  }
  .now-playing.hidden { display: none; }
  .np-info { display: flex; align-items: center; gap: 10px; }
  .np-cover { width: 44px; height: 44px; border-radius: 6px; object-fit: cover; background: #ddd; }
  .np-title { font-weight: 600; }
  .np-artist { font-size: 12px; color: var(--muted); }
  .np-actions { display: flex; align-items: center; gap: 8px; }
  #npVolume { width: 140px; }
  
  .player { display: grid; gap: 18px; justify-items: center; }
  .player-cover { width: 280px; height: 280px; border-radius: 16px; object-fit: cover; background: #ddd; box-shadow: var(--shadow); }
  .player-title { font-size: 22px; font-weight: 700; text-align: center; }
  .player-artist { font-size: 14px; color: var(--muted); text-align: center; }
  .player-controls { display: flex; gap: 14px; }
  .player-extras { display: flex; align-items: center; gap: 12px; }
  .vol-label { color: var(--muted); font-size: 12px; }
  .seek-row { width: 100%; display: grid; grid-template-columns: auto 1fr auto; gap: 10px; align-items: center; }
  #seekSlider, #volumeSlider { width: 100%; }
  
  input[type="range"] {
    accent-color: var(--accent);
    cursor: pointer;
  }
  button.btn, .btn {
    border-color: color-mix(in srgb, var(--accent) 25%, var(--border));
  }
  a, .btn { text-decoration: none; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
  }
  